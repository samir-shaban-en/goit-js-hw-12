{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport async function getImagesByQuery(query, page) {\n  const {\n    data: { hits, totalHits },\n  } = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '50844575-9e292bfe2a1d78c665340f91a',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    },\n  });\n\n  return { hits, totalHits };\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const ref = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nconst gallery = new SimpleLightbox('.gallery a', {});\n\nexport function createGallery(images) {\n  const imagesMArkup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class='gallery-item'>\n         <a href='${largeImageURL}'>\n         <img src='${webformatURL}' alt='${tags}' width='360'\n         />\n         </a>\n      <ul class='info-list'>\n      \n      <li class='info-item'>\n         <span>Likes</span>\n         <span>${likes}</span>\n        </li>\n\n        <li class='info-item'>\n          <span>views</span>\n         <span>${views}</span>\n         </li>\n\n         <li class='info-item'>\n          <span>comments</span>\n         <span>${comments}</span>\n         </li>\n\n         <li class='info-item'>\n          <span>downloads</span>\n         <span>${downloads}</span>\n         </li>\n       </ul>\n      </li>`;\n      }\n    )\n    .join('');\n\n  ref.gallery.insertAdjacentHTML('beforeend', imagesMArkup);\n\n  gallery.refresh();\n}\n\nexport function hideLoader() {\n  ref.loader.classList.add('hide');\n}\n\nexport function showLoader() {\n  ref.loader.classList.remove('hide');\n}\n\nexport function clearGallery() {\n  ref.gallery.innerHTML = '';\n}\nexport function showLoadMoreButton() {\n  ref.loadBtn.classList.remove('hide');\n}\nexport function hideLoadMoreButton() {\n  ref.loadBtn.classList.add('hide');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  ref,\n  createGallery,\n  showLoader,\n  clearGallery,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nhideLoader();\nlet page = 1;\nlet inputValue = null;\nconst limit = 15;\n\nref.form.addEventListener('submit', formSbmtHandler);\n\nasync function formSbmtHandler(e) {\n  e.preventDefault();\n  const input = e.currentTarget.elements.search.value.trim();\n  inputValue = input;\n  page = 1;\n\n  if (inputValue === '') {\n    iziToast.warning({\n      message: 'The input is empty',\n      position: 'topRight',\n    });\n    ref.form.reset();\n    return;\n  }\n\n  showLoader();\n  clearGallery();\n\n  try {\n    const { hits, totalHits } = await getImagesByQuery(inputValue, page);\n    const totalPages = Math.ceil(totalHits / limit);\n\n    if (hits.length === 0) {\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        color: 'red',\n      });\n      hideLoadMoreButton();\n      return;\n    } else {\n      iziToast.success({\n        message: `Images with ${inputValue} are found`,\n        position: 'topRight',\n        color: 'green',\n      });\n    }\n\n    if (page >= totalPages) {\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n\n    createGallery(hits);\n  } catch (error) {\n    iziToast.warning({\n      message: `${error}`,\n      position: 'topRight',\n    });\n  } finally {\n    ref.form.reset();\n    hideLoader();\n  }\n}\n\nref.loadBtn.addEventListener('click', onLoadBtnClick);\n\nasync function onLoadBtnClick() {\n  showLoader();\n  page++;\n\n  try {\n    const { hits, totalHits } = await getImagesByQuery(inputValue, page);\n    const totalPages = Math.ceil(totalHits / limit);\n\n    if (page >= totalPages) {\n      iziToast.warning({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        position: 'topRight',\n        color: 'red',\n      });\n      hideLoadMoreButton();\n      return;\n    } else {\n      iziToast.success({\n        message: `Images with ${inputValue} are found`,\n        position: 'topRight',\n        color: 'green',\n      });\n    }\n\n    createGallery(hits);\n    showLoadMoreButton();\n  } catch (error) {\n    iziToast.warning({\n      message: `${error}`,\n      position: 'topRight',\n    });\n  } finally {\n    ref.form.reset();\n    hideLoader();\n    autoSkroll();\n  }\n}\n\nfunction autoSkroll() {\n  const card = document.querySelector('.gallery-item');\n  if (!card) {\n    return;\n  }\n  const { height } = card.getBoundingClientRect();\n\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImagesByQuery","query","page","hits","totalHits","axios","ref","gallery","SimpleLightbox","createGallery","images","imagesMArkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hideLoader","showLoader","clearGallery","showLoadMoreButton","hideLoadMoreButton","inputValue","limit","formSbmtHandler","e","iziToast","totalPages","error","onLoadBtnClick","autoSkroll","card","height"],"mappings":"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"}